# Cursor Rules

- Do not use emojis in project files or responses.
- Avoid compliments or praise; keep the tone neutral.
- Verify claims before agreeing; no reflexive agreement.
- Never include real credentials (API keys, tokens, passwords); use placeholders instead.

# PRIME DIRECTIVE - NO FALLBACKS

If we need something:
1. Set up a system to get it
2. If that fails, we fail and fix step 2
3. NEVER add a fallback/hacky patch (step 4) to try to work around the failure

Fail fast, fail clearly. Fix the root cause, don't paper over it.

# DATABASE SCHEMA RULES

- Every table MUST have an autoincrement integer ID as primary key (NOT NULL)
- Every table MUST have `created` and `updated` DateTime fields that auto-update

# GENERAL DEVELOPMENT RULES

- Don't make up random extensions to what the user has asked; it's good to suggest options but you need to confirm and not just add things which might not be good without asking.

# NAME CLEANING RULES

- Name cleaning must NEVER rename, move, modify, or delete files on disk
- Only filter entries from the database and/or modify how they are displayed to users
- Files on disk must remain untouched - all changes are database/display-only





### Cursor Rules (Project-specific)

- No fallbacks that recompute data downstream. If normalization or extraction happens upstream and fails, do not retry with a different method elsewhere. Fix the upstream step or re-run it.
  - Canonical example: Year extraction
    - Right: Extract year during indexing/cleaning (`scanning.index_movie`), store in `Movie.year`, and only read `Movie.year` in all APIs and UI.
    - Wrong: If `Movie.year` is null, do not try to parse year again in `/api/movie`, search responses, history, or explore endpoints. This creates a second, divergent source of truth.
  - Rationale: A single source of truth eliminates drift, racey inconsistencies, and hidden complexity. If the result is missing, the correct fix is to improve the upstream step or re-index, not to introduce a downstream fallback.

- PRIME DIRECTIVE - NO FALLBACKS
  1. Set up the system to get what we need.
  2. If it fails, fail and fix step 2.
  3. Do not add a fallback/hacky patch to work around the failure.

These rules apply to parsing, metadata extraction (e.g., year, duration), configuration detection, and external tool discovery. Move good code upstream; do not mask failures with alternate logic later in the flow.
*** End Patch}?>

